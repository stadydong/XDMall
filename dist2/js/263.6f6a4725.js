"use strict";(self["webpackChunkvue2_view"]=self["webpackChunkvue2_view"]||[]).push([[263],{3263:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login flex justify-center items-center h-full"},[t("div",{staticClass:"content w-100 text-center bg-white py-14 border rounded-md"},[t("div",{staticClass:"h-16 w-16 text-6xl bg-red-700 text-center text-white rounded-full p-1 box-content mx-auto"},[e._v("M")]),t("div",{staticClass:"text-lg mt-4 mb-6"},[e._v("使用账号登录XDMall官网")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.username,expression:"userInfo.username"}],staticClass:"w-5/6 border h-10 pl-2 text-base",attrs:{type:"text",placeholder:"测试账号 test"},domProps:{value:e.userInfo.username},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"username",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.password,expression:"userInfo.password"}],staticClass:"w-5/6 border h-10 mt-4 pl-2 text-base",attrs:{type:"password",placeholder:"测试密码 test"},domProps:{value:e.userInfo.password},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"password",t.target.value)}}}),t("div",{staticClass:"code mt-4 w-5/6 mx-auto flex justify-between my-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.code,expression:"userInfo.code"}],staticClass:"border flex-1 pl-4 mr-10 h-10",attrs:{type:"text"},domProps:{value:e.userInfo.code},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"code",t.target.value)}}}),t("span",{domProps:{innerHTML:e._s(e.imgCode)},on:{click:e.getCode}})]),t("div",{staticClass:"option flex justify-between w-5/6 m-auto"},[t("div",{staticClass:"left flex items-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedV,expression:"checkedV"}],staticClass:"w-5 h-5",attrs:{type:"checkbox",name:"",id:""},domProps:{checked:Array.isArray(e.checkedV)?e._i(e.checkedV,null)>-1:e.checkedV},on:{change:function(t){var s=e.checkedV,a=t.target,o=!!a.checked;if(Array.isArray(s)){var r=null,c=e._i(s,r);a.checked?c<0&&(e.checkedV=s.concat([r])):c>-1&&(e.checkedV=s.slice(0,c).concat(s.slice(c+1)))}else e.checkedV=o}}}),t("span",{staticClass:"ml-1 text-zinc-400 text-sm"},[e._v("记住密码")])]),e._m(0)]),t("div",{staticClass:"w-5/6 m-auto mt-4",on:{click:e.login}},[t("button",{staticClass:"w-full bg-blue-600 text-white text-xl py-2"},[e._v("登录")])])])])},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"right flex"},[t("a",{attrs:{href:""}},[t("div",[e._v("注册XDMall账号")])]),t("div",{staticClass:"mx-2 text-zinc-400"},[e._v("|")]),t("a",{attrs:{href:""}},[t("div",[e._v("忘记密码")])])])}],r=(s(7658),s(2619));const c=()=>r.Z.get("/login/code"),n=e=>r.Z.post("/login",e),i=(e,t)=>{const{status:s,message:a}=e;switch(console.log(e,t),s){case 400:const e=a.response.message;e.forEach((e=>{t.$message.error(e)}));break;case 401:t.$message.error(a.message);break;case 404:t.$message.error(a.message);break}};var l={data(){return{imgCode:"",userInfo:{username:JSON.parse(localStorage.getItem("account"))||"",password:JSON.parse(localStorage.getItem("password"))||"",code:""},checkedV:!0}},created(){this.getCode()},methods:{async login(){localStorage.setItem("account",JSON.stringify(this.userInfo.username));try{const e=await n(this.userInfo);e.success&&(localStorage.setItem("token",JSON.stringify(e.data.token)),localStorage.setItem("username",JSON.stringify(e.data.username)),localStorage.setItem("uid",JSON.stringify(e.data.id)),localStorage.setItem("password",JSON.stringify(this.userInfo.password)),this.$message.success("登录成功，正在跳转首页"),this.$router.push({path:"/"})),console.log(e),i(e,this)}catch(e){console.log(e)}},async getCode(){try{const e=await c();this.imgCode=e}catch(e){console.log(e)}}}},d=l,u=s(1001),m=(0,u.Z)(d,a,o,!1,null,"0004e465",null),g=m.exports}}]);