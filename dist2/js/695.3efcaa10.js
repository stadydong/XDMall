"use strict";(self["webpackChunkvue2_view"]=self["webpackChunkvue2_view"]||[]).push([[695],{7695:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"goods px-40 bg-zinc-50"},[t("div",{staticClass:"order mb-1 flex h-12 items-center"},[t("a",{attrs:{"href.sync":""},on:{click:function(t){return e.orderRule(0)}}},[t("div",{staticClass:"order-item",class:{"order-item-active":0===e.priceOrderType}},[e._v("综合排序")])]),t("a",{attrs:{"href.sync":""},on:{click:function(t){return e.orderRule(1)}}},[t("div",{staticClass:"order-item",class:{"order-item-active":1===e.priceOrderType}},[e._v("价格从低到高")])]),t("a",{attrs:{"href.sync":""},on:{click:function(t){return e.orderRule(2)}}},[t("div",{staticClass:"order-item",class:{"order-item-active":2===e.priceOrderType}},[e._v("价格从高到低")])]),t("div",{staticClass:"price order-item"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.PriceValue.startPrice,expression:"PriceValue.startPrice"}],staticClass:"text-center w-20 rounded-md text-lg border",attrs:{type:"text",name:"startPrice",placeholder:"价格"},domProps:{value:e.PriceValue.startPrice},on:{input:function(t){t.target.composing||e.$set(e.PriceValue,"startPrice",t.target.value)}}}),t("span",{staticClass:"mx-2 leading-7"},[e._v("-")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.PriceValue.endPrice,expression:"PriceValue.endPrice"}],staticClass:"text-center w-20 rounded-md text-lg border",attrs:{type:"text",name:"endPrice",placeholder:"价格"},domProps:{value:e.PriceValue.endPrice},on:{input:function(t){t.target.composing||e.$set(e.PriceValue,"endPrice",t.target.value)}}}),t("button",{staticClass:"rounded-md text-base leading-7 w-20 border ml-2 bg-blue-600 text-white",on:{click:function(t){return e.orderRule(3)}}},[e._v(" 确定 ")])])]),t("div",{staticClass:"product-list flex flex-wrap"},e._l(e.productData?.productList,(function(r,a){return t("Cart",{key:r.id,staticClass:"w-1/4 p-8 bg-white border",attrs:{panel:r,pindex:0},on:{addCar:e.addCar,lookProductDetail:e.lookProductDetail}})})),1),t("div",{staticClass:"pagination flex justify-center py-10"},[t("a-pagination",{attrs:{"show-size-changer":"",total:e.productData?.count,"page-size":e.pageSize},on:{showSizeChange:e.onShowSizeChange,change:e.changeCurrentPage,"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])},i=[],c=(r(7658),r(2619));const s=(e,t,r,a,i)=>c.Z.get("/product",{params:{skip:e,take:t,priceOrderType:r,startPrice:a,endPrice:i}});var n={data(){return{productData:{},currentPage:1,pageSize:10,PriceValue:{startPrice:null,endPrice:null},priceOrderType:0}},watch:{},methods:{async getProductData(e,t,r,a,i){let c=e*t;this.productData={};try{const e=await s(c,t,r,a,i);console.log(e.data),this.productData=e.data}catch(n){console.log("获取ProductList错误",n)}},onShowSizeChange(e,t){this.getProductData(--e,t)},changeCurrentPage(e,t){this.getProductData(--e,t)},orderRule(e){if(3===e)e=this.priceOrderType;else if(this.priceOrderType===e)return;this.priceOrderType=e;let t=this.currentPage,r=this.pageSize;const{startPrice:a,endPrice:i}=this.PriceValue;this.getProductData(--t,r,e,a,i)},addCar(e){this.$store.dispatch("AddCar",{product:e})},lookProductDetail(e){this.$router.push({path:"/goodsDetail",query:{productDetailId:e.productDetail.id}})}},created(){let e=this.currentPage;this.getProductData(--e,this.pageSize)}},o=n,d=r(1001),u=(0,d.Z)(o,a,i,!1,null,"240559e8",null),l=u.exports}}]);